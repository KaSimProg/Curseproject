<UserControl x:Class="Cursep.Views.AdminPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="Auto" Width="Auto">

    <Grid>
        <TabControl>
            <!-- Вкладка Пользователи -->
            <TabItem Header="Управление пользователями" Height="22" Margin="-2,-2,-2,0" VerticalAlignment="Top">
                <ScrollViewer>
                    <StackPanel Margin="10">
                        <TextBlock Text="Управление пользователями системы" 
                                  FontSize="16" FontWeight="Bold" Margin="0,0,0,20"/>

                        <!-- Панель управления -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <Button x:Name="btnAddUser" Content="Добавить пользователя" 
                                    Height="35" Padding="10,0" Margin="0,0,10,0"
                                    Background="#27ae60" Foreground="White" Click="BtnAddUser_Click"/>
                            <Button x:Name="btnEditUser" Content="Редактировать" 
                                    Height="35" Padding="10,0" Margin="0,0,10,0"
                                    Background="#3498db" Foreground="White" Click="BtnEditUser_Click"/>
                            <Button x:Name="btnBlockUser" Content="Удалить" 
                                    Height="35" Padding="10,0" Margin="0,0,10,0"
                                    Background="#e74c3c" Foreground="White" Click="BtnBlockUser_Click"/>
                        </StackPanel>

                        <!-- Список пользователей -->
                        <DataGrid x:Name="dgUsers" AutoGenerateColumns="False" Height="400" SelectionMode="Single">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding UserID}" Width="50"/>
                                <DataGridTextColumn Header="Логин" Binding="{Binding Username}" Width="100"/>
                                <DataGridTextColumn Header="ФИО" Binding="{Binding FullName}" Width="200"/>
                                <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="150"/>
                                <DataGridTextColumn Header="Телефон" Binding="{Binding Phone}" Width="120"/>
                                <DataGridTextColumn Header="Роль" Binding="{Binding RoleName}" Width="120"/>
                                <DataGridTextColumn Header="Дата регистрации" 
                                                   Binding="{Binding CreatedDate, StringFormat={}{0:dd.MM.yyyy}}" 
                                                   Width="120"/>
                                <DataGridCheckBoxColumn Header="Активен" Binding="{Binding IsActive}" Width="70"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Вкладка Система -->
            <TabItem Header="Системные настройки">
                <ScrollViewer>
                    <StackPanel Margin="10">
                        <TextBlock 
                                  FontSize="16" FontWeight="Bold" Margin="0,0,0,20"><Run Language="ru-ru" Text="Статистика и мониторинг"/><LineBreak/><Run Language="ru-ru"/></TextBlock>

                        <!-- Статистика системы -->
                        <GroupBox Header="Статистика системы" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <WrapPanel>
                                    <Border Background="#ecf0f1" BorderBrush="#bdc3c7" BorderThickness="1" 
                                            Padding="10" Margin="0,0,10,10">
                                        <StackPanel>
                                            <TextBlock Text="Всего пользователей" FontSize="11" Foreground="#666"/>
                                            <TextBlock x:Name="txtTotalUsers" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>

                                    <Border Background="#ecf0f1" BorderBrush="#bdc3c7" BorderThickness="1" 
                                            Padding="10" Margin="0,0,10,10">
                                        <StackPanel>
                                            <TextBlock Text="Активных сессий" FontSize="11" Foreground="#666"/>
                                            <TextBlock x:Name="txtActiveSessions" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>

                                    <Border Background="#ecf0f1" BorderBrush="#bdc3c7" BorderThickness="1" 
                                            Padding="10" Margin="0,0,10,10">
                                        <StackPanel>
                                            <TextBlock Text="Операций сегодня" FontSize="11" Foreground="#666"/>
                                            <TextBlock x:Name="txtTodayOperations" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                </WrapPanel>
                            </StackPanel>
                        </GroupBox>
                        <!-- Логи системы -->
                        <GroupBox Header="Последние действия системы">
                            <DataGrid x:Name="dgSystemLogs" AutoGenerateColumns="False" Height="200" Margin="10">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Время" 
                                                       Binding="{Binding OperationDate, StringFormat={}{0:dd.MM.yyyy HH:mm}}" 
                                                       Width="120"/>
                                    <DataGridTextColumn Header="Пользователь" Binding="{Binding UserName}" Width="120"/>
                                    <DataGridTextColumn Header="Действие" Binding="{Binding OperationType}" Width="100"/>
                                    <DataGridTextColumn Header="Материал" Binding="{Binding MaterialName}" Width="150"/>
                                    <DataGridTextColumn Header="Количество" Binding="{Binding Quantity}" Width="80"/>
                                    <DataGridTextColumn Header="Примечание" Binding="{Binding Notes}" Width="200"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>